# WhisperPad

<p align="center">
  <strong>🎤 macOS メニューバー常駐型 音声文字起こしアプリ</strong>
</p>

<p align="center">
  ホットキー一発で音声を録音し、オンデバイスでテキストに変換。<br>
  クリップボードやファイルに即座に出力。
</p>

<p align="center">
  <img src="https://img.shields.io/badge/platform-macOS%2014.0+-blue" alt="Platform">
  <img src="https://img.shields.io/badge/architecture-Apple%20Silicon-orange" alt="Architecture">
  <img src="https://img.shields.io/badge/license-MIT-green" alt="License">
</p>

---

## ✨ 特徴

- **🚀 ホットキーで即座に起動** - グローバルショートカットで素早く録音開始
- **🔒 完全オンデバイス処理** - WhisperKit によるローカル音声認識（ネットワーク不要）
- **📋 柔軟な出力先** - クリップボード、ファイル、アクティブアプリへの直接挿入
- **🎯 メニューバー常駐** - 邪魔にならないミニマルな UI
- **🌍 多言語対応** - 日本語、英語など多言語の音声認識に対応

---

## 📋 目次

- [動作要件](#動作要件)
- [インストール](#インストール)
- [使い方](#使い方)
- [機能一覧](#機能一覧)
- [設定項目](#設定項目)
- [技術仕様](#技術仕様)

---

## 動作要件

| 項目       | 要件                                 |
| ---------- | ------------------------------------ |
| OS         | macOS 14.0 (Sonoma) 以降             |
| チップ     | Apple Silicon (M1 / M2 / M3 / M4)    |
| ストレージ | 最小 100MB（モデルサイズにより変動） |

### 必要な権限

- **マイクアクセス** - 音声録音のため
- **アクセシビリティ** - グローバルホットキーのため

---

## インストール

### Homebrew（予定）

```bash
brew install --cask WhisperPad
```

### 手動インストール

1. [Releases](https://github.com/your-username/WhisperPad/releases) から最新の `.dmg` をダウンロード
2. `WhisperPad.app` を `/Applications` にドラッグ
3. 初回起動時に必要な権限を許可

---

## 使い方

### 基本操作

1. **アプリを起動** → メニューバーにマイクアイコンが表示
2. **ホットキーを押す** → 録音開始（アイコンが赤く変化）
3. **話す** → 音声を録音
4. **ホットキーを再度押す** → 録音停止 → 自動で文字起こし
5. **完了** → テキストがクリップボードにコピーされる

### デフォルトホットキー

| ショートカット     | 動作                       |
| ------------------ | -------------------------- |
| `⌥ Option + Space` | 録音開始/停止（トグル）    |
| `⌘ + Shift + V`    | 最後の書き起こしをペースト |

---

## 機能一覧

### メニューバー UI

```
┌─────────────────────────────┐
│ 🎤 WhisperPad               │
├─────────────────────────────┤
│ ● 録音開始         ⌥ Space │
├─────────────────────────────┤
│ 📝 履歴                     │
│   ├ 今日の会議メモ...       │
│   ├ 買い物リスト...         │
│   └ アイデアメモ...         │
├─────────────────────────────┤
│ ⚙️  設定...                 │
│ ❓ ヘルプ                   │
├─────────────────────────────┤
│ 終了                        │
└─────────────────────────────┘
```

### 録音モード

| モード           | 説明                                                |
| ---------------- | --------------------------------------------------- |
| **Toggle**       | ホットキー 1 回で開始、再度押して停止（デフォルト） |
| **Push-to-Talk** | ホットキー押下中のみ録音                            |

### 出力オプション

| 出力先               | 説明                                   |
| -------------------- | -------------------------------------- |
| **クリップボード**   | 変換完了後、自動でコピー（デフォルト） |
| **ファイル保存**     | 指定フォルダに `.txt` として保存       |
| **アクティブアプリ** | 現在のカーソル位置に直接挿入           |
| **通知センター**     | 書き起こし結果を通知で表示             |

---

## 設定項目

### 一般設定

| 項目                 | 説明                   | デフォルト |
| -------------------- | ---------------------- | ---------- |
| ログイン時に起動     | macOS 起動時に自動起動 | OFF        |
| メニューバーアイコン | アイコンスタイルの選択 | 標準       |
| 通知                 | 変換完了時の通知       | ON         |

### ホットキー設定

| 項目               | 説明                  | デフォルト  |
| ------------------ | --------------------- | ----------- |
| 録音ショートカット | 録音開始/停止のキー   | `⌥ + Space` |
| 録音モード         | Toggle / Push-to-Talk | Toggle      |

### 録音設定

| 項目         | 説明               | デフォルト         |
| ------------ | ------------------ | ------------------ |
| 入力デバイス | 使用するマイク     | システムデフォルト |
| 最大録音時間 | 自動停止までの時間 | 60 秒              |
| 無音検出     | 無音で自動停止     | OFF                |
| 無音しきい値 | 無音と判定する秒数 | 3 秒               |

### 認識設定

| 項目           | 説明                 | デフォルト |
| -------------- | -------------------- | ---------- |
| Whisper モデル | 使用するモデルサイズ | small      |
| 言語           | 認識言語             | 自動検出   |

#### モデル比較

| モデル   | サイズ | 速度     | 精度  | 推奨用途             |
| -------- | ------ | -------- | ----- | -------------------- |
| tiny     | ~40MB  | ⚡⚡⚡⚡ | ★★☆☆  | 短いメモ、高速性重視 |
| base     | ~75MB  | ⚡⚡⚡   | ★★★☆  | 日常的な使用         |
| small    | ~250MB | ⚡⚡     | ★★★★  | バランス型（推奨）   |
| medium   | ~750MB | ⚡       | ★★★★☆ | 高精度が必要な場合   |
| large-v3 | ~1.5GB | ⚡       | ★★★★★ | 最高精度             |

### 出力設定

| 項目           | 説明                         | デフォルト                       |
| -------------- | ---------------------------- | -------------------------------- |
| 出力先         | クリップボード/ファイル/両方 | クリップボード                   |
| 保存フォルダ   | ファイル保存先               | `~/Documents/WhisperPad`         |
| ファイル名形式 | 命名規則                     | `WhisperPad_YYYYMMDD_HHmmss.txt` |

---

## 技術仕様

### アーキテクチャ

```
┌─────────────────────────────────────────────────────────┐
│                    WhisperPad App                        │
├─────────────────────────────────────────────────────────┤
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────────┐ │
│  │   MenuBar   │  │  Settings   │  │    History      │ │
│  │     UI      │  │    View     │  │     View        │ │
│  └──────┬──────┘  └──────┬──────┘  └────────┬────────┘ │
│         │                │                   │          │
│  ┌──────┴────────────────┴───────────────────┴────────┐ │
│  │                   App Core                         │ │
│  │  ┌────────────┐  ┌────────────┐  ┌──────────────┐ │ │
│  │  │  HotKey    │  │  Audio     │  │   Output     │ │ │
│  │  │  Manager   │  │  Recorder  │  │   Manager    │ │ │
│  │  └─────┬──────┘  └─────┬──────┘  └───────┬──────┘ │ │
│  └────────┼───────────────┼─────────────────┼────────┘ │
│           │               │                 │          │
├───────────┼───────────────┼─────────────────┼──────────┤
│  ┌────────┴──────┐  ┌─────┴─────┐  ┌────────┴───────┐ │
│  │    HotKey     │  │AVFoundation│  │  NSPasteboard  │ │
│  │   Library     │  │           │  │  FileManager   │ │
│  └───────────────┘  └─────┬─────┘  └────────────────┘ │
│                           │                            │
│                    ┌──────┴──────┐                     │
│                    │  WhisperKit │                     │
│                    │  (CoreML)   │                     │
│                    └─────────────┘                     │
└─────────────────────────────────────────────────────────┘
```

### 技術スタック

| コンポーネント | 技術                                                  |
| -------------- | ----------------------------------------------------- |
| UI             | SwiftUI / AppKit                                      |
| 音声録音       | AVFoundation                                          |
| 音声認識       | [WhisperKit](https://github.com/argmaxinc/WhisperKit) |
| ホットキー     | [HotKey](https://github.com/soffes/HotKey)            |
| データ永続化   | UserDefaults / FileManager                            |

### ユーザーフロー

````
┌─────────┐     ホットキー      ┌─────────┐
│  待機中  │ ──────────────────▶ │ 録音中  │
│  (Idle) │                     │(Recording)│
└─────────┘                     └────┬────┘
     ▲                               │
     │                          ホットキー
     │                          or 自動停止
     │                               │
     │                               ▼
     │                         ┌─────────┐
     │                         │ 変換中  │
     │                         │(Processing)│
     │                         └────┬────┘
     │                               │
     │         完了                  │
     └───────────────────────────────┘
                    │
                    ▼
            ┌───────────────┐
            │ 出力処理       │
            │ • クリップボード│
            │ • ファイル保存  │
            │ • 通知表示     │
            └───────────────┘
```-
````
